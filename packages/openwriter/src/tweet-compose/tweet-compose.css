/* =============================================================
   Tweet Compose View — pixel-accurate X/Twitter design system
   Activated via [data-view="tweet"] on <html>

   Design tokens extracted from live x.com (Feb 2026):
   - Font: "TwitterChirp", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif
   - Primary text: #0f1419 (light) / #e7e9ea (dark)
   - Secondary text: #536471 (light) / #71767b (dark)
   - X Blue: #1d9bf0
   - Border: #eff3f4 (light) / #2f3336 (dark)
   - Card border: #cfd9de (light) / #333639 (dark)
   - Background: #ffffff (light) / #000000 (dark)
   - Column width: 600px
   ============================================================= */

/* --- CSS custom properties for X design tokens --- */
:root {
  --x-font: "TwitterChirp", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
  --x-text-primary: #0f1419;
  --x-text-secondary: #536471;
  --x-blue: #1d9bf0;
  --x-red: #f4212e;
  --x-green: #00ba7c;
  --x-yellow: #ffd400;
  --x-bg: #ffffff;
  --x-bg-hover: rgba(0, 0, 0, 0.03);
  --x-border: #eff3f4;
  --x-border-card: #cfd9de;
  --x-thread-line: #cfd9de;
  --x-column-width: 600px;
}

[data-mode="dark"] {
  --x-text-primary: #e7e9ea;
  --x-text-secondary: #71767b;
  --x-bg: #000000;
  --x-bg-hover: rgba(255, 255, 255, 0.03);
  --x-border: #2f3336;
  --x-border-card: #333639;
  --x-thread-line: #333639;
}

/* --- Global overrides when in tweet compose mode --- */
[data-view="tweet"] .editor-container {
  display: flex;
  justify-content: center;
}

[data-view="tweet"] .ProseMirror {
  max-width: 100% !important;
  padding: 4px 0 !important;
  font-family: var(--x-font) !important;
  font-size: 20px !important;
  line-height: 24px !important;
  color: var(--x-text-primary) !important;
}

[data-view="tweet"] .ProseMirror p.is-editor-empty:first-child::before {
  content: "What is happening?!" !important;
  color: var(--x-text-secondary) !important;
  font-size: 20px !important;
}

/* --- Compose wrapper (main column) --- */
.tweet-compose-wrapper {
  width: 100%;
  max-width: var(--x-column-width);
  margin: 0 auto;
  padding: 0;
  display: flex;
  flex-direction: column;
  font-family: var(--x-font);
}

/* --- Tweet context section (holds embedded tweet) --- */
.tweet-context-section {
  padding: 12px 16px 0;
}

.tweet-quote-section {
  padding: 12px 0 0;
}

/* --- Tweet embed card --- */
.tweet-embed-card {
  border: 1px solid var(--x-border-card);
  border-radius: 16px;
  padding: 12px 16px;
  background: var(--x-bg);
  cursor: default;
}

.tweet-embed-nested {
  margin-top: 12px;
}

/* Author row — avatar + name/handle inline */
.tweet-author-row {
  display: flex;
  align-items: center;
  gap: 8px;
  margin-bottom: 4px;
}

.tweet-avatar {
  width: 40px;
  height: 40px;
  border-radius: 9999px;
  object-fit: cover;
  flex-shrink: 0;
}

.tweet-embed-nested .tweet-avatar {
  width: 20px;
  height: 20px;
}

.tweet-avatar-placeholder {
  background: var(--x-border);
}

/* Name and handle on same line (X layout) */
.tweet-author-info {
  display: flex;
  align-items: center;
  gap: 4px;
  min-width: 0;
  overflow: hidden;
}

.tweet-author-name {
  font-weight: 700;
  font-size: 15px;
  line-height: 20px;
  color: var(--x-text-primary);
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}

.tweet-author-handle {
  font-size: 15px;
  font-weight: 400;
  color: var(--x-text-secondary);
  line-height: 20px;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.tweet-author-separator {
  color: var(--x-text-secondary);
  font-size: 15px;
  flex-shrink: 0;
}

.tweet-author-timestamp {
  color: var(--x-text-secondary);
  font-size: 15px;
  line-height: 20px;
  white-space: nowrap;
  flex-shrink: 0;
}

/* Tweet text */
.tweet-text {
  font-size: 15px;
  line-height: 20px;
  color: var(--x-text-primary);
  white-space: pre-wrap;
  word-break: break-word;
}

.tweet-embed-nested .tweet-text {
  font-size: 15px;
  line-height: 20px;
}

/* Media */
.tweet-media {
  margin-top: 12px;
  border-radius: 16px;
  overflow: hidden;
  border: 1px solid var(--x-border);
}

.tweet-media-img {
  width: 100%;
  display: block;
}

.tweet-media-video-placeholder {
  width: 100%;
  height: 200px;
  background: var(--x-bg-hover);
  display: flex;
  align-items: center;
  justify-content: center;
  color: var(--x-text-secondary);
  font-size: 14px;
}

/* --- Action bar (reply, retweet, like, bookmark, share) --- */
.tweet-actions-row {
  display: flex;
  justify-content: space-between;
  margin-top: 4px;
  padding: 4px 0;
}

.tweet-action {
  display: flex;
  align-items: center;
  gap: 4px;
  color: var(--x-text-secondary);
  font-size: 13px;
  line-height: 16px;
  padding: 0;
  border: none;
  background: none;
  cursor: default;
  font-family: var(--x-font);
  border-radius: 9999px;
  transition: color 0.2s;
}

.tweet-action svg {
  width: 18.75px;
  height: 18.75px;
  flex-shrink: 0;
}

.tweet-action-reply:hover { color: var(--x-blue); }
.tweet-action-retweet:hover { color: var(--x-green); }
.tweet-action-like:hover { color: #f91880; }
.tweet-action-bookmark:hover { color: var(--x-blue); }

/* --- Reply thread layout (unified two-column) --- */
.tweet-reply-thread {
  display: flex;
  gap: 12px;
  padding: 12px 16px 0;
}

.tweet-reply-thread-left {
  display: flex;
  flex-direction: column;
  align-items: center;
  width: 40px;
  flex-shrink: 0;
}

.tweet-reply-thread-line {
  width: 2px;
  flex: 1;
  min-height: 12px;
  background: var(--x-thread-line);
  margin: 4px 0;
}

.tweet-reply-thread-right {
  flex: 1;
  min-width: 0;
}

.tweet-reply-parent {
  margin-bottom: 4px;
}

/* Parent tweet in reply thread uses timeline font size (not card size) */
.tweet-reply-parent .tweet-text {
  font-size: 17px;
  line-height: 24px;
}

/* --- Replying to indicator (inline in thread) --- */
.tweet-replying-to-inline {
  font-size: 15px;
  line-height: 20px;
  color: var(--x-text-secondary);
  padding: 8px 0 4px;
}

/* --- Replying to indicator (standalone, outside thread) --- */
.tweet-replying-to {
  font-size: 15px;
  line-height: 20px;
  color: var(--x-text-secondary);
  padding: 4px 16px 8px 68px;
}

.tweet-reply-handle {
  color: var(--x-blue);
}

/* --- Compose area --- */
.tweet-compose-area {
  display: flex;
  gap: 12px;
  padding: 12px 16px 0;
}

.tweet-compose-avatar {
  width: 40px;
  height: 40px;
  border-radius: 9999px;
  background: var(--x-border);
  flex-shrink: 0;
}

.tweet-compose-content {
  flex: 1;
  min-width: 0;
}

/* Legacy compose box (for when no avatar layout) */
.tweet-compose-box {
  min-height: 80px;
}

/* --- Compose footer: counter + post button --- */
.tweet-compose-footer {
  display: flex;
  align-items: center;
  justify-content: flex-end;
  gap: 16px;
  padding: 12px 16px;
  border-top: 1px solid var(--x-border);
}

/* --- Character counter --- */
.tweet-char-counter {
  position: relative;
  width: 30px;
  height: 30px;
  display: flex;
  align-items: center;
  justify-content: center;
}

.tweet-char-number {
  position: absolute;
  font-size: 11px;
  font-weight: 600;
  font-family: var(--x-font);
}

/* --- Post button --- */
.tweet-post-btn {
  font-family: var(--x-font);
  font-size: 15px;
  font-weight: 700;
  line-height: 20px;
  padding: 0 16px;
  height: 36px;
  border-radius: 9999px;
  border: none;
  background: var(--x-blue);
  color: #ffffff;
  cursor: not-allowed;
  opacity: 0.5;
  min-width: 72px;
}

/* --- Error state --- */
.tweet-embed-error {
  border: 1px solid var(--x-border-card);
  border-radius: 16px;
  padding: 16px;
  text-align: center;
  color: var(--x-text-secondary);
  font-size: 15px;
  line-height: 20px;
  display: flex;
  flex-direction: column;
  gap: 4px;
}

.tweet-fallback-link {
  color: var(--x-blue);
  font-size: 13px;
  word-break: break-all;
}

/* --- Skeleton loading --- */
.tweet-skeleton {
  border: 1px solid var(--x-border-card);
  border-radius: 16px;
  padding: 12px 16px;
}

.tweet-skeleton .tweet-skeleton-line {
  display: block;
  height: 12px;
  border-radius: 4px;
  background: var(--x-border);
}

.tweet-pulse {
  animation: tweet-pulse-anim 1.5s ease-in-out infinite;
}

@keyframes tweet-pulse-anim {
  0%, 100% { opacity: 1; }
  50% { opacity: 0.4; }
}

/* --- Date / footer below tweet (used in detail view, not feed) --- */
.tweet-footer {
  display: none;
}

/* --- Separator between tweet and actions in non-card context --- */
.tweet-detail-separator {
  height: 1px;
  background: var(--x-border);
  margin-top: 12px;
}
